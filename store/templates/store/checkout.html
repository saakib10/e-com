{% extends 'base.html' %}
{% load static %}
{% block css %}
<link rel="stylesheet" href="{% static 'css/bs-select.css' %}" type="text/css" />
<style>

	.white-section {
		background-color: #FFF;
		padding: 25px 20px;
		-webkit-box-shadow: 0px 1px 1px 0px #dfdfdf;
		box-shadow: 0px 1px 1px 0px #dfdfdf;
		border-radius: 3px;
	}

	.white-section label {
		display: block;
		margin-bottom: 15px;
	}

	.white-section pre { margin-top: 15px; }

	.dark .white-section {
		background-color: #111;
		-webkit-box-shadow: 0px 1px 1px 0px #444;
		box-shadow: 0px 1px 1px 0px #444;
	}

	</style>
{% endblock css %}
{% block content %}
    <div class="cart-box-main">
        <div class="container">
            
            <div class="row col-mb-50 gutter-50 hidden">
                <div class="col-lg-6 bottommargin-sm">
                    <div class="white-section">
                        <div class="form-check">
                            <input class="form-check-input" value="1" type="checkbox" id="gridCheck">
                            <label class="form-check-label" for="gridCheck">Custoemr Default Address</label>
                        </div>
                    </div>
                    <div class="white-section form-address">
                        <div class="row" style="background-color: #F5F5F5; padding: 17px;">
                            <div class="col-lg-6">
                                <label>Province</label>
                                    <select class="selectpicker" data-size="5">
                                        <option>Mustard</option>
                                    </select>
                            </div>
                            <div class="col-lg-6">
                                <label>City</label>
                                    <select class="selectpicker" data-size="5">
                                        <option>Mustard</option>
                                    </select>
                            </div>
                            <div class="col-lg-12 mt-5">
                                <label>Area</label>
                                    <select class="selectpicker" data-size="5">
                                        <option>Mustard</option>
                                    </select>
                            </div>
                            <div class="col-lg-12 mt-5">
                                <div class="form-group">
                                    <label for="exampleFormControlTextarea1">Address</label>
                                    <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    <div class="white-section address-list d-none">
                        <div class="promo promo-light p-4 p-md-5 mb-5">
                            <div class="row align-items-center">
                                <div class="col-10 col-lg">
                                    {% if address.province %}<h4 class="m-1">{{ address.province }}</h4>{% endif %}
                                    {% if address.city %}<h4 class="m-1">{{ address.city }}</h4>{% endif %}
                                    {% if address.province %}<h4 class="m-1">{{ address.area }}</h4>{% endif %}
                                    {% if address.province %}
                                        <span><h4>{{ address.address }}</h4></span>
                                    {% endif %}
                                </div>
                                <div class="col-2 col-lg-auto mt-4 mt-lg-0">
                                    <a href="#" class="button button-3d button-black m-0">Start Trial</a>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                
                <div class="col-lg-6">
                    <h4>Cart Totals</h4>

                    <div class="table-responsive">
                        <table class="table cart">
                            <tbody>
                                <tr class="cart_item">
                                    <td class="border-top-0 cart-product-name">
                                        <strong>Cart Subtotal</strong>
                                    </td>

                                    <td class="border-top-0 cart-product-name">
                                        <span class="amount">{{ order.get_cart_items }}</span>
                                    </td>
                                </tr>
                                <tr class="cart_item">
                                    <td class="cart-product-name">
                                        <strong>Total</strong>
                                    </td>

                                    <td class="cart-product-name">
                                        <span class="amount color lead"><strong>${{ order.get_cart_total }}</strong></span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <a href="#" class="button button-3d button-black m-0">Place Order</a>
                </div>


                <div class="w-100"></div>

                <div class="col-lg-6">
                    <h4>Your Orders</h4>

                    <div class="table-responsive">
                        <table class="table cart">
                            <thead>
                                <tr>
                                    <th class="cart-product-thumbnail">&nbsp;</th>
                                    <th class="cart-product-name">Product</th>
                                    <th class="cart-product-quantity">Quantity</th>
                                    <th class="cart-product-subtotal">Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="cart_item">
                                    <td class="cart-product-thumbnail">
                                        <a href="#"><img width="64" height="64" src="images/shop/thumbs/small/dress-3.jpg" alt="Pink Printed Dress"></a>
                                    </td>

                                    <td class="cart-product-name">
                                        <a href="#">Pink Printed Dress</a>
                                    </td>

                                    <td class="cart-product-quantity">
                                        <div class="quantity clearfix">
                                            1x2
                                        </div>
                                    </td>

                                    <td class="cart-product-subtotal">
                                        <span class="amount">$39.98</span>
                                    </td>
                                </tr>
                                <tr class="cart_item">
                                    <td class="cart-product-thumbnail">
                                        <a href="#"><img width="64" height="64" src="images/shop/thumbs/small/shoes-2.jpg" alt="Checked Canvas Shoes"></a>
                                    </td>

                                    <td class="cart-product-name">
                                        <a href="#">Checked Canvas Shoes</a>
                                    </td>

                                    <td class="cart-product-quantity">
                                        <div class="quantity clearfix">
                                            1x1
                                        </div>
                                    </td>

                                    <td class="cart-product-subtotal">
                                        <span class="amount">$24.99</span>
                                    </td>
                                </tr>
                                <tr class="cart_item">
                                    <td class="cart-product-thumbnail">
                                        <a href="#"><img width="64" height="64" src="images/shop/thumbs/small/tshirt-2.jpg" alt="Pink Printed Dress"></a>
                                    </td>

                                    <td class="cart-product-name">
                                        <a href="#">Blue Men Tshirt</a>
                                    </td>

                                    <td class="cart-product-quantity">
                                        <div class="quantity clearfix">
                                            1x3
                                        </div>
                                    </td>

                                    <td class="cart-product-subtotal">
                                        <span class="amount">$41.97</span>
                                    </td>
                                </tr>
                            </tbody>

                        </table>
                    </div>
                </div>
            </div>

        </div>
    </div>

{% endblock content %}

{% block js %}
<script>
    $('#gridCheck').on('change', function(){
        this.value = this.checked ? 1 : 0;
        if (this.value == 1) {
            $(".form-address").addClass("d-none");
            $(".address-list").removeClass("d-none")
        }else {
            $(".address-list").addClass("d-none");
            $(".form-address").removeClass("d-none")
        }
     }).change();
</script>

    {% comment %} <script type="text/javascript">

        var total = '{{ order.get_cart_total }}'
        var form = document.getElementById('form')

        if ( user == 'AnonymousUser'){
			document.getElementById('form-hide').classList.add("hidden");


		}

        form.addEventListener('submit',function(e){
			e.preventDefault()
			})
        document.getElementById('payment-submit').addEventListener('click',function(){
			console.log('submitted...')
			customerFormData()
		})
		function customerFormData(){

            var customerInfo = {
                'mobile' : null,
                'email' : null,
                'address' : null,
                'total' : total,

            }


            customerInfo.mobile = form.mobile.value
            customerInfo.email = form.email.value
            customerInfo.address = form.address.value

            var url = '/process_order/'
			fetch(url, {
				method : 'POST',
				headers : {
					'Content-Type':'application/json',
					'X-CSRFToken': csrftoken,
				},
				body:JSON.stringify({'form':customerInfo})

			})
			.then((response) => response.json())
			.then((data) => {
				alert('transaction complete');
				window.location.href = "{% url 'shop' %}"
			})


		}


    </script> {% endcomment %}
    


{% endblock js %}
